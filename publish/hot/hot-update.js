webpackHotUpdate(0,{13:function(t,e,n){"use strict";var a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var i=a(n(6));e.default=i.default.extend({})},15:function(t,e,n){"use strict";var a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var i=n(19),r=a(n(6));e.default=r.default.extend({data:function(){return{beginTime:i.formatterDate(new Date,"yyyy-MM-dd hh:mm:ss"),endTime:i.formatterDate(new Date,"yyyy-MM-dd hh:mm:ss"),columns:[{field:"idx",align:"center",title:"序号"},{field:"eqname",align:"center",title:"设备名称"},{field:"eqposition",align:"center",title:"设备位置"},{field:"eqtype",align:"center",title:"设备类别"},{field:"ip",align:"center",title:"IP地址"},{field:"status",align:"center",title:"设备状态"}]}},created:function(){var t=this;this.columns.forEach(function(e){switch(e.field){case"happentime":case"endtime":e.formatter=t.formatterDate,e.align="center";break;case"idx":e.formatter=t.formatterIdx,e.align="center";break;default:e.align="center"}})},methods:{formatterDate:function(t){return i.formatterDate(t,"yyyy-MM-dd hh:mm:ss")},formatterAction:function(t){return"<a class='edit glyphicon glyphicon-eye-open' title='查看详情' data-id='"+t+"'></a>"},formatterIdx:function(t,e,n,a){return n+1},formatVehicleuse:function(t,e,n,a){return t+":"+(null!=e.requesttimes?e.requesttimes:1)+"趟"},LoadData:function(){$.ajax({url:"/api/HomeContent/GetEquipmentStatusList",method:"get",contentType:"application/json",success:function(t){}})}},mounted:function(){$("#tb").bootstrapTable({columns:this.columns,url:"api/HomeContent/GetEquipmentStatusList",method:"get"})}})},17:function(t,e,n){"use strict";var a=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e},i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var r,o=a(n(19)),s=i(n(6)),c=n(19),l=a(n(33)),u="",f="time",p=n(36),d=new p.WebapiService;e.default=s.default.extend({name:"parent",data:function(){return{Name:"child request",Url:"api/Tb_Ts_Request/GetListByParam?sortName=time&role=9&filter=&day="+u+"&status=",columns:[{field:"Requestuser",align:"center",title:"申请单位"},{field:"Starttime",align:"center",title:"发车时间"},{field:"Vehicletype",align:"center",title:"车辆类型"},{field:"Id",align:"center",title:"操作"}]}},methods:{clickModifyfunction:function(){$("#phoneDialog").modal("toggle")},PhoneSave:function(){alert($("#txtPhone").val())},formattervehicletype:function(t){var e=JSON.parse(window.localStorage.vehicleTypeList).filter(function(e){return e.Diccode===t});return e.length>0?e[0].Dicname:""},formatterStatus:function(t){return 1==t?'<span class="label label-success">审批已通过</span>':5==t?'<span class="label label-warning">审批未通过</span>':2==t?'<span class="label label-info">审批中</span>':0==t?'<span class="label label-danger">待审批</span>':4==t?'<span class="label label-primary">已派车</span>':7==t?'<span class="label label-warning">待派车</span>':3==t?'<span class="label" style="background-color:#87CEFA">车队待确认</span>':8==t?'<span class="label" style="background-color:#BA55D3">车队驳回</span>':6==t?'<span class="label" style="background-color:#00CED1">无效派车</span>':9==t?'<span class="label" style="background-color:#00FF00">已完结</span>':void 0},RetrieveStatistic:function(){var t=this;$("#stcgroup").empty(),$.ajax({url:"api/Tb_Ts_Request/StatisticCount?role=9&day="+u,success:function(e){if(e){switch(f){case"time":var n=e.filter(function(t){return"time"==t.type});n.length>16?($("#stcgroupContainer").css("height","74px"),window.screen.width<1920?$("#tb_div").height(640):$("#tb_div").height(800)):($("#stcgroupContainer").css("height","36px"),window.screen.width<1920?$("#tb_div").height(670):$("#tb_div").height(800)),n.forEach(function(t){$("#stcgroup").append($("<button class='filter-btn btn time' data-val='"+t.val+"'>"+t.val+":00 <span class='badge'>"+t.mount+"</span></button>"))});break;case"department":var a=e.filter(function(t){return"department"==t.type});a.length>16?($("#stcgroupContainer").css("height","74px"),window.screen.width<1920?$("#tb_div").height(640):$("#tb_div").height(800)):($("#stcgroupContainer").css("height","36px"),window.screen.width<1920?(a.length>12&&$("#stcgroupContainer").css("height","74px"),$("#tb_div").height(670)):$("#tb_div").height(800)),a.forEach(function(t){$("#stcgroup").append($("<button class='filter-btn btn department' data-val='"+t.val+"'>"+t.val+"<span class='badge'>"+t.mount+"</span></button>"))});break;case"type":var i=e.filter(function(t){return"vehicletype"==t.type});i.length>16?($("#stcgroupContainer").css("height","74px"),window.screen.width<1920?$("#tb_div").height(640):$("#tb_div").height(800)):($("#stcgroupContainer").css("height","36px"),window.screen.width<1920?$("#tb_div").height(670):$("#tb_div").height(800)),i.forEach(function(e){$("#stcgroup").append($("<button class='filter-btn btn type' data-val='"+e.val+"'>"+t.formattervehicletype(e.val)+"<span class='badge'>"+e.mount+"</span></button>"))})}var r=e.filter(function(t){return"status"==t.type});$("#statusgroup").empty(),r.forEach(function(e){$("#statusgroup").append($("<button class='filter-btn btn status' data-val='"+e.val+"'>"+t.formatterStatus(e.val)+"<span class='badge'>"+e.mount+"</span></button>"))})}}})},formatterVehicleType:function(t){var e=r.filter(function(e){return e.Diccode===t});return new l.GetTableData(1,10,"id","asc").GetData().then(function(t){console.log(t)}),e.length>0?e[0].Dicname:""},formatterAction:function(t){return"<a data-id='"+t+"' class='customUp glyphicon glyphicon-arrow-up'>&nbsp;&nbsp;</a><a data-id='"+t+"' class='customDown glyphicon glyphicon-arrow-down'></a>"},formatterDate:function(t){return c.formatterDate(t,"yyyy-MM-dd hh:mm:ss")}},mounted:function(){var t=this;u=o.formatterDate((new Date).toString(),"yyyy-MM-dd"),$("#searchDate input").val(o.formatterDate((new Date).toString(),"yyyy-MM-dd")),$("#TIME").val(o.formatterDate((new Date).toString(),"yyyy-MM-dd")),$("#tb").bootstrapTable({columns:this.columns}),$("#searchDate").datetimepicker({language:"zh-CN",weekStart:0,todayBtn:1,autoclose:1,todayHighlight:1,minView:"month",startView:2,forceParse:0}).on("changeDate",function(t){});var e=new p.WebapiService;e.GetRequestList(u).then(function(e){$("#tb").bootstrapTable("load",e),t.RetrieveStatistic()}),e.GetRequestStatistic().then(function(t){t.filter(function(t,e){return"time"==t.type}).forEach(function(t){$("#stcgroup").append($("<button class='filter-btn btn time' data-val='"+t.val+"'>"+t.val+":00 <span class='badge'>"+t.mount+"</span></button>"))})}),this.$nextTick(function(){var t=this;$(".stc").click(function(){$(".btn-warning").removeClass("btn-warning"),$(this).addClass("btn-warning"),$("#stcgroup").empty(),$("#statusgroup").empty(),f=$(this).attr("data-val"),t.RetrieveStatistic(),console.log($(".customUp").length)})}),$("body").on("click",".customUp",function(){$(this).parent().parent().insertBefore($(this).parent().parent().prev())}),$("body").on("click",".customDown",function(){$(this).parent().parent().insertAfter($(this).parent().parent().next())})},created:function(){var t=this;this.columns.forEach(function(e){switch(e.field){case"Requestcode":e.align="center";break;case"Starttime":case"Requesttime":e.formatter=t.formatterDate,e.align="center";break;case"Vehicletype":e.formatter=t.formatterVehicleType;break;case"Id":e.formatter=t.formatterAction}}),console.log(this.columns),d.GetVehicleTypeList().then(function(t){r=t,window.localStorage.vehicleTypeList=JSON.stringify(r)})},computed:{fixed:{get:function(){return this.Name+","+this.Url},set:function(t){this.Url=t.split(",")[0],this.Name=t.split(",")[1]}}}})},19:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.formatterDate=function(t,e){if(e||(e="yyyy-MM-dd hh:mm"),!t)return"";var n=t;if("string"==typeof t)if(t.indexOf("/Date(")>-1)n=new Date(parseInt(t.replace("/Date(","").replace(")/",""),10));else{var a=Date.parse(t.replace(/-/g,"/").replace("T"," ").split(".")[0]);n="NaN"===a.toString()?new Date(t):new Date(a)}var i={"M+":n.getMonth()+1,"d+":n.getDate(),"h+":n.getHours(),"m+":n.getMinutes(),"s+":n.getSeconds(),"q+":Math.floor((n.getMonth()+3)/3),S:n.getMilliseconds()};for(var r in/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(n.getFullYear()+"").substr(4-RegExp.$1.length))),i)new RegExp("("+r+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?i[r]:("00"+i[r]).substr((""+i[r]).length)));return e}},25:function(t,e,n){"use strict";var a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},i=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e};Object.defineProperty(e,"__esModule",{value:!0});var r=a(n(6)),o=i(n(37)),s=a(n(29));r.default.config.devtools=!0;var c=a(n(30)),l=a(n(31)),u=a(n(32));r.default.use(c.default);var f=new c.default({routes:[{path:"/Eqstatus",name:"",component:l.default},{path:"/request",name:"",component:u.default}]});window.onload=function(){new r.default({el:"#app",router:f,data:{},components:{App:s.default},methods:{},created:function(){},mounted:function(){}});var t=(new o.HubConnectionBuilder).withUrl("http://192.168.132.254:82/ServiceHub",{skipNegotiation:!0,transport:o.HttpTransportType.WebSockets}).build();t.start().then(function(){console.log("connected")}).catch(function(t){return console.log("错误消息:"+t)}),t.on("clientHandler",function(t){console.log(t)})}},33:function(t,e,n){"use strict";var a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var i=a(n(21)),r=function(){function t(t,e,n,a){this.PageNumner=t,this.PageSize=e,this.SortName=n,this.Sort=a}return t.prototype.GetData=function(){var t=this;return new i.default(function(e,n){t.PageSize+=10,t.PageNumner+=5,t.SortName="modified",t.Sort="desc",e(t)})},t}();e.GetTableData=r;var o=function(){function t(){this.RequestCount=0}return t.prototype.createElement=function(t){return document.createElement("div")},t}();e.TestEmplement=o},36:function(t,e,n){"use strict";var a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var i=a(n(21)),r=function(){function t(){}return t.prototype.GetRequestList=function(t){return new i.default(function(e,n){$.ajax({url:"/api/Tb_Ts_Request/GetListByParam?sortName=time&role=9&filter=&day="+t+"&status=",method:"get",contentType:"application/json",success:function(t){e(t)},error:function(t){n(t)}})})},t.prototype.GetVehicleTypeList=function(){return new i.default(function(t,e){$.ajax({url:"/api/Sy_Dic/GetDicVehicleType",method:"get",contentType:"application/json",success:function(e){t(e)},error:function(t){e(t)}})})},t.prototype.GetRequestStatistic=function(){return new i.default(function(t,e){$.ajax({url:"/api/Tb_Ts_Request/StatisticCount?role=9&day=1",method:"get",contentType:"application/json",success:function(e){t(e)},error:function(t){e(t)}})})},t}();e.WebapiService=r}});